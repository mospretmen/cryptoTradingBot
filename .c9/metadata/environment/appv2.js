{"changed":true,"filter":false,"title":"appv2.js","tooltip":"/appv2.js","value":"var express = require('express');\nvar app = express();\nvar bodyParser = require('body-parser');\nvar methodOverride = require('method-override');\nvar _ = require('lodash');\n// var route = require(\"./routes/route.js\");\n// var user = require('./models/user.js');\n// var _ = require('lodash');\n\n\n//===============================================================================================================================\n//      Binance CONFIG\n//===============================================================================================================================\n\n\nconst binance = require('node-binance-api')().options({\n  APIKEY: 'KkzLIQ4Je2UwkehagnIaY5Jk1tsY4Yo3BAZqUy6WcydDtF4jtXTftHmXVtVUs5u9',\n  APISECRET: 'Z5nxpN8xbj1gQ27bEgTANgOGGd8JzsZVOKdgnOy3ta18Tfh6itJGiA9eDmYUwn7f',\n  useServerTime: true, // If you get timestamp errors, synchronize to server time at startup\n  test: false // If you want to use sandbox mode where orders are simulated\n});\n\n//===============================================================================================================================\n//      DATABASE CONFIG\n//===============================================================================================================================\n\nvar mongoose = require('mongoose');\nmongoose.connect('mongodb://admin:qqw3mqw8@ds155651.mlab.com:55651/tradingbot', { useNewUrlParser: true });\n\n//===============================================================================================================================\n//      BodyParser + MethodOverride + EJS CONFIG\n//===============================================================================================================================\n\n\napp.set(\"view engine\", \"ejs\");\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({extended: true}));\napp.use(methodOverride(\"_method\"));\napp.use(express.static(__dirname + \"/public\"));\n\n//===============================================================================================================================\n//      Binance API\n//===============================================================================================================================\n\n\n\n\n\n\nbinance.candlesticks(\"REQETH\", \"5m\", (error, ticks, symbol) => {\n  console.log(\"Last 3 candlesticks()\", ticks);\n  let last_tick = ticks[ticks.length - 1];\n  let [time, open, high, low, close, volume, closeTime, assetVolume, trades, buyBaseVolume, buyAssetVolume, ignored] = last_tick;\n  console.log(symbol+\" last close: \"+ close, ticks[2][4]);\n}, {limit: 3, endTime: Date.now()});\n\nconsole.log(new Date().toUTCString(1540885500));\n\nvar quantity = 500, price = 0.00032;\nbinance.sell(\"REQETH\", quantity, price, {type:'LIMIT'}, (error, response) => {\n  console.log(\"Limit Sell response\", response);\n  console.log(\"order id: \" + response.orderId);\n});\n\n\n\n//===============================================================================================================================\n//      ROUTES\n//===============================================================================================================================\n\n\n// app.use('/', route);\n\napp.get('/', (req, res) => {\n    res.render('index.ejs');\n});\n\n\n//===============================================================================================================================\n//      SERVER START\n//===============================================================================================================================\n\n\napp.listen(process.env.PORT, process.env.IP, function(){\n   console.log('server start on port...' + process.env.PORT); \n});","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":46,"column":0},"end":{"row":47,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":47,"column":0},"end":{"row":48,"column":0},"action":"insert","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":225,"scrollleft":0,"selection":{"start":{"row":30,"column":48},"end":{"row":30,"column":48},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":18,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1540935037181}